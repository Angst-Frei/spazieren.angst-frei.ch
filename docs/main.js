"use strict";(self.webpackChunkspazieren_angst_frei_ch=self.webpackChunkspazieren_angst_frei_ch||[]).push([[179],{138:(e,o,n)=>{n(978),n(732),n(652),n(817),n(687),n(408),n(292),n(920),n(504),n(681),n(905),n(278),n(385),n(13),n(981),n(931),n(979),n(207);var r=n(243),a=n(755),s=n(460),d="https://docs.google.com/spreadsheets/d/150bvEzPMLPT0vhpmbXNupu2_z0itXj0r7r0E-yKbaas/edit#gid=164271551",g="AIzaSyA5IUHNyPZvWuCMTqvI4DJ2ygqDO5_t5Is",u=r.map("map",{preferCanvas:!0,fullscreenControl:{pseudoFullscreen:!1,position:"bottomleft"},attributionControl:!1,zoomControl:!1,scrollWheelZoom:!0,tap:!1}).setView([41.76,-72.69],11),f={notesSheetName:"Notes",optionsSheetName:"Options",pointsSheetName:"Points",polygonsSheetName:"Polygons",polylinesSheetName:"Polylines",_mapTitle:"Map Title",_mapSubtitle:"Map Subtitle",_mapTitleDisplay:"Display Title",_authorName:"Author Name",_authorURL:"Author Email or Website",_codeCredit:"Author Code Credit",_githubRepo:"Author Code Repo",_googleAnalytics:"Google Analytics Tracking ID",_tileProvider:"Basemap Tiles",_markercluster:"Cluster Markers",_introPopupText:"Intro Popup Text",_initZoom:"Initial Zoom",_initLat:"Initial Center Latitude",_initLon:"Initial Center Longitude",_mapSearch:"Search Button",_mapSearchCircleRadius:"Search Radius",_mapSearchZoom:"Search Results Zoom Level",_mapZoom:"Zoom Controls",_mapMyLocation:"Show My Location",_mapAttribution:"Credits and Attribution",_pointsLegendTitle:"Point Legend Title",_pointsLegendPos:"Point Legend Position",_pointsLegendIcon:"Point Legend Icon",_displayTable:"Display Table",_tableHeight:"Table Height",_tableColumns:"Table Columns",_tableHeaderColor:"Table Header Color",_polylinesLegendTitle:"Polyline Legend Title",_polylinesLegendPos:"Polyline Legend Position",_polylinesLegendIcon:"Polyline Legend Icon",_polylinesWeight:"Polyline Thickness",_polygonsLegendTitle:"Polygon Legend Title",_polygonsLegendPosition:"Polygon Legend Position",_polygonsLegendIcon:"Polygon Legend Icon",_polygonsGeojsonURL:"Polygon GeoJSON URL",_popupProp:"Property Popups, Labels",_polygonLayers:"Polygon Properties, Labels",_bucketDivisors:"Property Ranges",_colorScheme:"Property Range Color Palette",_colorOpacity:"Polygon Color Opacity",_outlineColor:"Polygon Outline Color",_bucketColors:"Property Range Manual Colors",_polygonDisplayImages:"Show Images When Available",_polygonLabel:"Show Polygon Labels",_polygonLabelZoomLevel:"Show Polygon Labels at Zoom Level",_polygonShowOnStart:"Show Polygon Data on Start"};a(window).on("load",(function(){var e,o={},n={},m=[],h=!1,y=!1,v=!1,_=0,L=0,b=[],P=[],C=[],T=[],k=[],S=[],w=[],I=[],O=[];function x(o){if(o<m.length&&U(o,"_polygonsGeojsonURL").trim()){_=o;var n=U(o,"_popupProp").split(";");for(i in n)n[i]=n[i].split(",");w.push(n),a.getJSON(U(o,"_polygonsGeojsonURL").trim(),(function(e){geoJsonLayer=r.geoJson(e,{onEachFeature:A,pointToLayer:function(e,o){return r.circleMarker(o,{className:"geojson-point-marker"})}}),T.push(geoJsonLayer),x(o+1)}))}else!function(){for(var o=0;o<m.length&&U(o,"_polygonsGeojsonURL").trim();){for(i in isNumerical=[],divisors=[],colors=[],polygonLayers=U(o,"_polygonLayers").split(";"),polygonLayers)polygonLayers[i]=polygonLayers[i].split(",");if(divisors=U(o,"_bucketDivisors").split(";"),divisors.length!=polygonLayers.length)return void alert("Error in Polygons: The number of sets of divisors has to match the number of properties");for(colors=U(o,"_bucketColors").split(";"),i=0;i<divisors.length;i++){for(divisors[i]=divisors[i].split(","),j=0;j<divisors[i].length;j++)divisors[i][j]=divisors[i][j].trim();colors[i]?colors[i]=colors[i].split(","):colors[i]=[]}for(i=0;i<divisors.length;i++){if(0==divisors[i].length)return void alert("Error in Polygons: The number of divisors should be > 0");if(0==colors[i].length)for(colors[i]=palette(H(o,"_colorScheme","tol-sq"),divisors[i].length),j=0;j<colors[i].length;j++)colors[i][j]="#"+colors[i][j].trim();else if(divisors[i].length!=colors[i].length)return void alert("Error in Polygons: The number of divisors should match the number of colors")}for(i=0;i<divisors.length;i++)if(isNaN(parseFloat(divisors[i][0].trim())))isNumerical[i]=!1;else for(isNumerical[i]=!0,j=0;j<divisors[i].length;j++)divisors[i][j]=parseFloat(divisors[i][j].trim());b.push(divisors),P.push(colors),C.push(isNumerical),S.push(polygonLayers);var n=H(o,"_polygonsLegendPosition","off");(e=r.control({position:"off"==n?"topleft":n})).onAdd=function(e){var n='<h6 class="pointer">'+U(o,"_polygonsLegendTitle")+"</h6>";for(i in n+="<form>",polygonLayers){var t=polygonLayers[i][1]?polygonLayers[i][1].trim():polygonLayers[i][0].trim();n+='<label><input type="radio" name="prop" value="'+o+";"+i+'"> ',n+=(t=""==t?"On":t)+"</label><br>"}n+='<label><input type="radio" name="prop" value="'+o+';-1"> Off</label></form><div class="polygons-legend-scale">';var l=r.DomUtil.create("div","leaflet-control leaflet-control-custom leaflet-bar ladder polygons-legend"+o);return l.innerHTML=n,l.innerHTML+="</div>",l},e.addTo(u),"off"==U(o,"_polygonsLegendPosition")&&a(".polygons-legend"+o).css("display","none"),k.push(e),o++}for(var i in O){var l=r.featureGroup(O[i]);I.push(l)}for(a('.ladder input:radio[name="prop"]').change((function(){_=parseInt(a(this).val().split(";")[0]),-1==(L=parseInt(a(this).val().split(";")[1]))?(a(".polygons-legend"+_).find(".polygons-legend-scale").hide(),u.hasLayer(T[_])&&(u.removeLayer(T[_]),u.hasLayer(I[_])&&u.removeLayer(I[_]))):N()})),t=0;t<o;t++)"on"==U(t,"_polygonShowOnStart")?a('.ladder input:radio[name="prop"][value="'+t+';0"]').click():a('.ladder input:radio[name="prop"][value="'+t+';-1"]').click();a(".polygons-legend-merged h6").eq(0).click().click(),y=!0}()}function N(){if(p=_,z=L,T[p].setStyle(D),u.hasLayer(T[p])||(u.addLayer(T[p]),!u.hasLayer(I[p])&&I[p]&&u.addLayer(I[p])),a("#polylines-legend form label input").each((function(e){a(this).click().click()})),""!=b[p][z]){a(".polygons-legend"+p+" .polygons-legend-scale").html("");for(var e=[],o=0;o<b[p][z].length;o++){var n=C[p][z],i=b[p][z][o],t=b[p][z][o+1],r=M(i);i=i?B(i):i,t=t?B(t):t,e.push('<i style="background:'+r+"; opacity: "+H(p,"_colorOpacity","0.7")+'"></i> '+i+(t&&n?"&ndash;"+t:n?"+":""))}a(".polygons-legend"+p+" .polygons-legend-scale").html(e.join("<br>")),a(".polygons-legend"+p+" .polygons-legend-scale").show(),G()}else a(".polygons-legend"+p).find(".polygons-legend-scale").css({margin:"0px",padding:"0px",border:"0px solid"})}function D(e){var o=e.properties[S[_][L][0].trim()];return"Point"==e.geometry.type?{radius:4,weight:1,opacity:1,color:M(o),fillOpacity:H(_,"_colorOpacity","0.7"),fillColor:"white"}:{weight:2,opacity:1,color:H(_,"_outlineColor","white"),dashArray:"3",fillOpacity:H(_,"_colorOpacity","0.7"),fillColor:M(o)}}function M(e){var o,n=C[_][L],i=P[_][L],t=b[_][L];if(n)for(o=i.length-1;e<t[o];)o-=1;else for(o=0;o<i.length-1&&e!=t[o];o++);return i[o]||(o=0),i[o]}function A(e,o){if(""!=U(_,"_popupProp")||"off"!=U(_,"_polygonDisplayImages")){var n="";for(i in props=w[_],props)if(""!=props[i]){n+=props[i][1]?props[i][1].trim():props[i][0].trim();var t=e.properties[props[i][0].trim()];n+=": <b>"+(t?B(t):t)+"</b><br>"}if("on"==U(_,"_polygonDisplayImages")&&e.properties.img&&(n+='<img src="'+e.properties.img+'">'),o.bindPopup(n),O[_]||O.push([]),""!==U(_,"_polygonLabel")){var l=r.marker(polylabel(o.feature.geometry.coordinates,1).reverse(),{icon:r.divIcon({className:"polygon-label"+_+" polygon-label",html:e.properties[U(_,"_polygonLabel")]})});O[_].push(l)}}}function Z(e,t,s){var p,d;!function(e){for(var n in e){var i=e[n];o[i.Setting]=i.Customize}}(e),document.title=R("_mapTitle"),p=J("_tileProvider","CartoDB.Positron"),r.tileLayer.provider(p,{maxZoom:19}).addTo(u),r.control.attribution({position:J("_mapAttribution","bottomright")}).addTo(u);var g,f,m="";if(t&&t.length>0?(d=function(e){var o=[],i={};for(var t in e){var l=e[t].Group;l&&-1===o.indexOf(l)&&(o.push(l),n[l]=e[t]["Marker Icon"].indexOf(".")>0?e[t]["Marker Icon"]:e[t]["Marker Color"])}if(0===o.length)i=void 0;else for(var t in o){var a=o[t];i[a]=r.layerGroup(),i[a].addTo(u)}return i}(t),m=function(e,o){var n=[];for(var i in e){var t=e[i],l=t["Custom Size"],s=l.indexOf("x")>0?[parseInt(l.split("x")[0]),parseInt(l.split("x")[1])]:[32,32],p=[s[0]/2,s[1]],d=t["Marker Icon"].indexOf(".")>0?r.icon({iconUrl:t["Marker Icon"],iconSize:s,iconAnchor:p}):r.icon({iconUrl:"/img/angst-frei-marker-pin.png",iconSize:s,iconAnchor:p});if(""!==t.Latitude&&""!==t.Longitude){var c=r.marker([t.Latitude,t.Longitude],{icon:d}).bindPopup("<b>"+t.Name+"</b><br>"+(t.Image?'<img src="'+t.Image+'"><br>':"")+t.Description);void 0!==o&&1!==o.length&&c.addTo(o[t.Group]),n.push(c)}}var g=r.featureGroup(n),f="on"===R("_markercluster");if(void 0===o||0===o.length)u.addLayer(f?r.markerClusterGroup({chunkedLoading:!0}).addLayer(g).addTo(u):g);else{if(f){var m=r.markerClusterGroup.layerSupport();for(i in m.addTo(u),o)m.checkIn(o[i]),o[i].addTo(u)}var y="off"==R("_pointsLegendPos")?"topleft":R("_pointsLegendPos"),v=r.control.layers(null,o,{collapsed:!1,position:y});"off"!==R("_pointsLegendPos")&&(v.addTo(u),v._container.id="points-legend",v._container.className+=" ladder")}a("#points-legend").prepend('<h6 class="pointer">'+R("_pointsLegendTitle")+"</h6>"),""!=R("_pointsLegendIcon")&&a("#points-legend h6").prepend('<span class="legend-icon"><i class="fas '+R("_pointsLegendIcon")+'"></i></span>');var _="on"==R("_displayTable"),L=R("_tableColumns").split(",").map(Function.prototype.call,String.prototype.trim);if(_&&L.length>1){var b=J("_tableHeight",40);(b<10||b>90)&&(b=40),a("#map").css("height",100-b+"vh"),u.invalidateSize();var P=R("_tableHeaderColor").split(",");function n(){var n=[];for(i in e)u.hasLayer(o[e[i].Group])&&u.getBounds().contains(r.latLng(e[i].Latitude,e[i].Longitude))&&n.push(e[i]);var l=t(n);C.clear(),C.rows.add(l),C.draw()}function t(e){var o=[];for(var n in e){var i=[];for(var t in L)i.push(e[n][L[t]]);o.push(i)}return o}function l(){var e=[];for(var o in L)e.push({title:L[o]});return e}""!=P[0]&&(a("table.display").css("background-color",P[0]),P.length>=2&&a("table.display").css("color",P[1])),u.on("moveend",n),u.on("layeradd",n),u.on("layerremove",n);var C=a("#maptable").DataTable({paging:!1,scrollCollapse:!0,scrollY:"calc("+b+"vh - 40px)",info:!1,searching:!1,columns:l()})}return h=!0,g}(t,d)):h=!0,function(e){var o,n=u.getCenter().lat,i=!1,t=u.getCenter().lng,l=!1,a=12,s=!1;""!==R("_initLat")&&(n=R("_initLat"),i=!0),""!==R("_initLon")&&(t=R("_initLon"),l=!0),""!==R("_initZoom")&&(a=parseInt(R("_initZoom")),s=!0),o=i&&l||!e?r.latLng(n,t):e.getBounds().getCenter(),!s&&e&&(a=u.getBoundsZoom(e.getBounds())),u.setView(o,a)}(m),s&&s.length>0?function(e){if(e&&0!=e.length){var o="off"==R("_polylinesLegendPos")?"topleft":R("_polylinesLegendPos"),n=r.control.layers(null,null,{position:o,collapsed:!1});for(i=0;i<e.length;i++)a.getJSON(e[i]["GeoJSON URL"],function(o){return function(i){for(l in latlng=[],i.features)latlng.push(i.features[l].geometry.coordinates);for(l in latlng)for(c in latlng[l])latlng[l][c].reverse(),3==latlng[l][c].length&&latlng[l][c].shift();if(line=r.polyline(latlng,{color:""==e[o].Color?"grey":e[o].Color,weight:J("_polylinesWeight",2),pane:"shadowPane"}).addTo(u),e[o].Description&&""!=e[o].Description&&line.bindPopup(e[o].Description),n.addOverlay(line,'<i class="color-line" style="background-color:'+e[o].Color+'"></i> '+e[o]["Display Name"]),0==o&&(n._container&&(n._container.id="polylines-legend",n._container.className+=" ladder"),""!=R("_polylinesLegendTitle")&&(a("#polylines-legend").prepend('<h6 class="pointer">'+R("_polylinesLegendTitle")+"</h6>"),""!=R("_polylinesLegendIcon")&&a("#polylines-legend h6").prepend('<span class="legend-icon"><i class="fas '+R("_polylinesLegendIcon")+'"></i></span>'),"in polylines legend"==R("_mapTitleDisplay")))){var t="<h3>"+R("_mapTitle")+"</h3>",s="<h6>"+R("_mapSubtitle")+"</h6>";a("#polylines-legend").prepend(t+s)}e.length==o+1&&(v=!0)}}(i));"off"!==R("_polylinesLegendPos")&&n.addTo(u)}}(s):v=!0,U(0,"_polygonsGeojsonURL")&&U(0,"_polygonsGeojsonURL").trim()?x(0):y=!0,"off"!==R("_mapSearch")){var _=r.Control.geocoder({expand:"click",position:R("_mapSearch"),geocoder:r.Control.Geocoder.nominatim({geocodingQueryParams:{viewbox:"",bounded:1}})}).addTo(u);function e(){var e=u.getBounds();_.options.geocoder.options.geocodingQueryParams.viewbox=[e._southWest.lng,e._southWest.lat,e._northEast.lng,e._northEast.lat].join(",")}u.on("moveend",e)}"off"!==R("_mapMyLocation")&&r.control.locate({keepCurrentZoomLevel:!0,returnToPrevBounds:!0,position:R("_mapMyLocation")}).addTo(u),"off"!==R("_mapZoom")&&r.control.zoom({position:R("_mapZoom")}).addTo(u),u.on("zoomend",(function(){G()})),function(){var e=R("_mapTitleDisplay");if("off"!==e){var o='<h3 class="pointer">'+R("_mapTitle")+"</h3>",n="<h5>"+R("_mapSubtitle")+"</h5>";"topleft"==e?a("div.leaflet-top").prepend('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+o+n+"</div>"):"topcenter"==e&&(a("#map").append('<div class="div-center"></div>'),a(".div-center").append('<div class="map-title leaflet-bar leaflet-control leaflet-control-custom">'+o+n+"</div>")),a(".map-title h3").click((function(){location.reload()}))}}(),g=a(".leaflet-control-attribution")[0].innerHTML,R("_authorName"),R("_authorURL"),f="Code",R("_codeCredit")&&(f+=" by "+R("_codeCredit")),f+=" with ",a(".leaflet-control-attribution")[0].innerHTML=f+g,a("#points-legend label span").each((function(e){var o=a(this).text().trim(),i=n[o].indexOf(".")>0?'<img src="'+n[o]+'" class="markers-legend-icon">':'&nbsp;<i class="fas fa-map-marker" style="color: '+n[o]+'"></i>';a(this).prepend(i)})),function e(){if(h&&v&&y){for(i in a(".ladder h6").append('<span class="legend-arrow"><i class="fas fa-chevron-down"></i></span>'),a(".ladder h6").addClass("minimize"),k)""!=U(i,"_polygonsLegendIcon")&&a(".polygons-legend"+i+" h6").prepend('<span class="legend-icon"><i class="fas '+U(i,"_polygonsLegendIcon")+'"></i></span>');a(".ladder h6").click((function(){a(this).hasClass("minimize")?(a(".ladder h6").addClass("minimize"),a(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"),a(this).removeClass("minimize").parent().find(".legend-arrow i").removeClass("fa-chevron-down").addClass("fa-chevron-up")):(a(this).addClass("minimize"),a(this).parent().find(".legend-arrow i").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})),a(".ladder h6").first().click(),a("#map").css("visibility","visible"),a(".loader").hide(),""!=R("_introPopupText")&&(o=R("_introPopupText"),n=u.getCenter(),r.popup({className:"intro-popup",offset:[0,80]}).setLatLng(n).setContent(o).openOn(u)),G()}else setTimeout(e,50);var o,n}();var L=R("_googleAnalytics");if(L&&L.length>=10){var b=document.createElement("script");function e(){dataLayer.push(arguments)}b.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+L),document.head.appendChild(b),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",L)}}function G(){for(i in O)u.getZoom()<=H(i,"_polygonLabelZoomLevel",9)?a(".polygon-label"+i).hide():"-1"!=a(".polygons-legend"+i+" input[name=prop]:checked").val()&&a(".polygon-label"+i).show()}function R(e){return o[f[e]]}function U(e,o){return!!m[e]&&m[e][f[o]]}function J(e,o){return(e=R(e))&&""!==e.trim()?e:o}function H(e,o,n){return(o=U(e,o))&&""!==o.trim()?o:n}function E(e){var o={};for(var n in e){var i=e[n];o[i.Setting]=i.Customize}m.push(o)}function B(e){for(;/(\d+)(\d{3})/.test(e.toString());)e=e.toString().replace(/(\d+)(\d{3})/,"$1,$2");return e}a.ajax({url:"./csv/Options.csv",type:"HEAD",error:function(){var e=function(e){return s.parse(s.unparse(e[0].values),{header:!0}).data},o="https://sheets.googleapis.com/v4/spreadsheets/",n=d.indexOf("/d/")>0?d.split("/d/")[1].split("/")[0]:d;a.getJSON(o+n+"?key="+g).then((function(i){var t=i.sheets.map((function(e){return e.properties.title}));0===t.length||t.includes("Options"),a.when(a.getJSON(o+n+"/values/Options?key="+g),a.getJSON(o+n+"/values/Points?key="+g),a.getJSON(o+n+"/values/Polylines?key="+g)).done((function(i,r,l){var s=t.filter((function(e){return 0===e.indexOf("Polygons")})),p=function(t){0===t.length?Z(e(i),e(r),e(l)):a.getJSON(o+n+"/values/"+t.shift()+"?key="+g,(function(o){E(e([o])),p(t)}))};p(s)}))}))},success:function(){var e=function(e){return s.parse(e[0],{header:!0}).data};a.when(a.get("./csv/Options.csv"),a.get("./csv/Points.csv"),a.get("./csv/Polylines.csv")).done((function(o,n,i){!function t(r){a.get("./csv/Polygons"+(0===r?"":r)+".csv",(function(o){E(e([o])),t(r+1)})).fail((function(){Z(e(o),e(n),e(i))}))}(0)}))}})}))},905:(e,o,n)=>{e.exports=n.p+"img/angst-frei-marker-pin.png"},681:(e,o,n)=>{e.exports=n.p+"img/angst-frei.png"},385:(e,o,n)=>{e.exports=n.p+"img/animap-marker-pin.png"},278:(e,o,n)=>{e.exports=n.p+"img/animap.png"},981:(e,o,n)=>{e.exports=n.p+"img/mettagstesch-marker-pin-blue.png"},931:(e,o,n)=>{e.exports=n.p+"img/mettagstesch-marker-pin-gold.png"},13:(e,o,n)=>{e.exports=n.p+"img/mettagstesch.png"},207:(e,o,n)=>{e.exports=n.p+"img/sonja-marker-pin.png"},979:(e,o,n)=>{e.exports=n.p+"img/sonja.png"}},e=>{e.O(0,[821],(()=>(138,e(e.s=138)))),e.O()}]);